<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Canadian mortgage rate Vs Immigrants to Canada </title>
    <link rel="stylesheet" href="css/main.css">
    <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
    <script  type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <style>
         body {
         margin: 0;
         }
         ul {
         list-style-type: none;
         margin: 0;
         padding: 0;
         width: 15%;
         background-color: #808080;
         position: fixed;
         height: 100%;
         overflow: auto;
         }
         li button {
         background-color: inherit;
          float: left;
          border: none;
          outline: none;
          cursor: pointer;
          padding: 14px 16px;
          transition: 0.3s;
          font-size: 17px;
         display: block;
         color: #D3D3D3;
         text-decoration: none;
         }

         li button.active {
         background-color: #D8BFD8;
         color: white;
         }
         li button:hover:not(.active) {
         background-color: #555;
         color: white;
         }
      </style>
    <script>

         function showDiv(evt,divID)
         {
           var content = document.getElementsByClassName("content");
            for (i = 0; i < content.length; i++) {
             content[i].style.display = "none";
             }
           var  menulinks = document.getElementsByClassName("menulinks");

         for (i = 0; i < menulinks.length; i++) {
             menulinks[i].className = menulinks[i].className.replace(" active", "");
         }
           document.getElementById(divID).style.display = "block";
           if(divID === "provinceBar")
             {
              document.getElementById("Total_button").click();
             }
            else if(divID === "mortgageLine")
             {
             updateSVG();
             chart1();
             chart2();
             }
             else
             {
             updateSVG();
             ageB();
             }
             evt.currentTarget.className += " active";
         }


         function openCat(evt, catName) {
         var i, tabcontent, tablinks, displayName;
         tabcontent = document.getElementsByClassName("tabcontent");
         for (i = 0; i < tabcontent.length; i++) {
             tabcontent[i].style.display = "none";
         }
         document.getElementById("bar-container").style.display= "none";
         tablinks = document.getElementsByClassName("tablinks");

         for (i = 0; i < tablinks.length; i++) {
             tablinks[i].className = tablinks[i].className.replace(" active", "");
         }
         document.getElementById(catName).style.display = "block";
         evt.currentTarget.className += " active";


         displayName = document.getElementById(catName).innerText;
         console.log("dislay name ..... " + displayName);

         updateSVG();
         provB(catName, displayName);
         }


      </script>
</head>
<body>
<h2 style="padding-left:10px;">Canada population including International Immigration impacts on National Mortgages Line</h2>
<p style="padding-left:20px;">
      How does the Canadian population, especially the international immigrants factor since year 1990 impact on the national mortgage line?
</p>
<ul class="menu" id="menuContainer">
    <li><button id="opening" class="menulinks active" onclick="showDiv(event, 'essay')">About the Visualization</button></li>
    <li><button id="mortgage" class="menulinks" onclick="showDiv(event,'mortgageLine')">Mortgage line in Canada</button></li>
    <li><button id="province" class="menulinks" onclick="showDiv(event, 'provinceBar')">Population by Province</button></li>
    <li><button id="ageGroup" class="menulinks" onclick="showDiv(event, 'ageGroupBar')">Population by age group</button></li>
</ul>
<div style="margin-left:15%;padding:1px 16px;height:1200px;border: 2px solid black;
         border-radius: 5px;">
    <div id="essay" class="content">
        <p>This narrative visualization project aims to demonstrate to the user about the correlation between the number of population changes in Canada since 1990 and Canada mortgage rates as well as the mortgage line. </p>
        <p>There are three scenes developed in this narrative visualization. It is designed adopting the narrative visualization model. On the left panel, below “About the visualization” which would display the current content of the essay, there are three other buttons. These are the parameters of the visualization, which help navigate to the corresponding scene.</p>
        <p> “Mortgage line in Canada” demonstrates a slide with two line charts. Each charts has multiple lines with annotations at the right end of each line. The first graph demonstrates the prime rate released by Canada chartered bank (in blue) as well as the average residential mortgage lending rate for 5 years from the main five banks in Canada (in orange) since 1990. X-axis is year range and y-axis is rate in percentage. Mortgage lending rate fluctuates more than the bank prime rate.  The overall trend is the prime rate decreases significantly over the past 18 years.  The second line chart demonstrates the amount of mortgage has been approved over the same period of time. The line with annotation “total mortgages” also in blue, shows how the total amount of mortgages approved in Canada. Orange line and green line are residential mortgages in different conditions. X-axis is year range, same as the graph above. Y-axis is dollar amount. Since the mortgage rate dropped over time, it makes sense that more people tend to apply for loan. Especially at year 2010, the prime rate reached a bottle bottom. The same time in second graph, we can see a peak at both “total mortgages” and “residential mortgage, insured”.  </p>
        <p>Of course the prime rate could be affected by many factors such as the economy of the country, the inflation rate, credit market, and the performance of the country’s financial institutions. Canada is supported by each individual, and majority of them are immigrants. The next two scenes are demonstrating the population changes in Canada over the years with being divided into several categories.</p>
        <p>The third tab/button aims to demonstrate the population in each province of Canada. This scene contains horizontal bar charts. Y-axis has the names of provinces. Because province is ordinal. X-axis is the range of the number of population in bar with an annotation of the exact number attached. </p>
        <p>The user could click each tab on the top of the slide. The action would trigger the display of corresponding slide of that parameter the user clicked. User could look at how population changed in different categories and different time period.  </p>
        <p>The last tab/button would demonstrate the scene which shows the population that has been divided into age groups. User could leverage the parameter by clicking the buttons “Prev Year” and “Next Year” on the left top to trigger the previous slide or next slide to be displayed. Therefore it enables the annual data in bar chart to be shown to the user. Default view is from year 1990. The user could see how the number of population changed in each age group from 1990. X-axis contains groups which is divided by every 5 years. Y-axis is the range of the number of population. Annotation is the year number which would changed accordingly, showing the user which year’s data is displaying.</p>
        <p>Since 2010, note that the population of  the age group 25-29 and 30-34 increased significantly. One of the reason is due to Canada’s skills worker immigration program, which has stimulated the increases on the number of immigrants within those age group. People who met the criteria and also filed applications would be mostly the community of university graduates and who have worked for about two to three years after graduation. These group of people would be most likely to purchase homes after approved for their permanent residency. With the benefit of the low interest rate, there is higher chance for them to apply for mortgages and obtain mortgage approval since their income are stabled and secured. </p>
        <p>Data source: statcan.gc.ca/eng </p>

    </div>

    <div id="mortgageLine" class="content" style="display:none">
        <p>Mortgage rates</p>
        <div id="chart1">
        </div>
        <p> Mortgage approved amount in Canada</p>
        <div id="chart2">
        </div>
        <script src="js/mortgageLineChart.js"></script>
        <script src="js/mortgageLineChart2.js"></script>
    </div>
    <div id="provinceBar" class="content" style="display:none">
        <script type="text/javascript" src="js/provinceBar.js"></script>
        <div class="tab" id="tabContainer">
            <button id="Total_button" class="tablinks" onclick="openCat(event, 'Total')"  >Total</button>
            <button id="NonImmigrants_button" class="tablinks" onclick="openCat(event, 'NonImmigrants')">Non-Immigrants</button>
            <button id="Immigrants_button" class="tablinks" onclick="openCat(event, 'Immigrants')">Immigrants</button>
            <button id="Before2001_button" class="tablinks" onclick="openCat(event, 'Before2001')">Before 2001</button>
            <button id="y2001to2005_button" class="tablinks" onclick="openCat(event, 'y2001to2005')">year 2001 to 2005</button>
            <button id="y2006to2010_button" class="tablinks" onclick="openCat(event, 'y2006to2010')">year 2006 to 2010</button>
            <button id="y2011to2016_button" class="tablinks" onclick="openCat(event, 'y2011to2016')">year 2011 to 2016</button>
            <button id="NonPermanentResidents_button" class="tablinks" onclick="openCat(event, 'NonPermanentResidents')">Non Permanent Residents</button>
        </div>
        <div id="Total" class="tabcontent">
            <h3>Total Population in each Province</h3>
        </div>
        <div id="NonImmigrants" class="tabcontent">
            <h3>Non Immigrants in each Province</h3>
        </div>
        <div id="Immigrants" class="tabcontent">
            <h3>Immigrants in each Province</h3>
        </div>
        <div id="Before2001" class="tabcontent">
            <h3>Total Population in each Province</h3>
        </div>
        <div id="y2001to2005" class="tabcontent">
            <h3>Total Population from year 2001 to 2005 in each Province</h3>
        </div>
        <div id="y2006to2010" class="tabcontent">
            <h3>Total Population from year 2006 to 2010 in each Province</h3>
        </div>
        <div id="y2011to2016" class="tabcontent">
            <h3>Total Population from year 2011 to 2016 in each Province</h3>
        </div>
        <div id="NonPermanentResidents" class="tabcontent">
            <h3>Non PR Population in each Province</h3>
        </div>
        <div id="bar-container" class="tabcontent" data-profile="CSV/canPopulationByProvince.csv" >
        </div>
    </div>

    <div id="ageGroupBar" class="content" style="display:none" >
            <!--<svg width="960" height="500" id="svg3"></svg>-->
            <script type="text/javascript" src="js/ageGroupBar.js" ></script>
            <div class="slides">
                <button id="last">Prev Year</button>
                <button id="next">Next Year</button>
            </div>
        </div>

</div>
</body>
</html>